# ๐๏ธ ุชุนูููุงุช ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ุฎุทูุงุช ุชุทุจูู ุงูุชุญุฏูุซุงุช ุนูู Supabase

---

## โ๏ธ ููู ุฌุฏุงู: ูุจู ุงูุจุฏุก

### 1. ุงููุณุฎ ุงูุงุญุชูุงุทู

ูู ุจุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:

1. ุงูุชุญ Supabase Dashboard
2. ุงุฐูุจ ุฅูู Database โ Backups
3. ุงููุฑ ุนูู "Create Backup"
4. ุงูุชุธุฑ ุญุชู ุชูุชูู ุงูุนูููุฉ

### 2. ุงูุชุญูู ูู ุงูุงุชุตุงู

ุชุฃูุฏ ูู ุฃูู ูุชุตู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุตุญูุญุฉ:

- Project: [ุงุณู ูุดุฑูุนู]
- Database: [ุงุณู ูุงุนุฏุฉ ุงูุจูุงูุงุช]

---

## ๐ ุงูุฎุทูุฉ 1: ูุชุญ SQL Editor

1. ุงูุชุญ Supabase Dashboard
2. ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉุ ุงุฎุชุฑ **SQL Editor**
3. ุงููุฑ ุนูู **New Query**

---

## ๐ ุงูุฎุทูุฉ 2: ูุณุฎ ููุตู ุงูุณูุฑูุจุช

### ุงูุชุญ ุงูููู:

```
sql/update-product-pricing-system.sql
```

### ุงูุณุฎ ุงููุญุชูู ูุงููุงู ูุงูุตูู ูู SQL Editor

---

## โถ๏ธ ุงูุฎุทูุฉ 3: ุชูููุฐ ุงูุณูุฑูุจุช

1. ุชุฃูุฏ ูู ูุตู ุงูุณูุฑูุจุช ูุงููุงู
2. ุงููุฑ ุนูู ุฒุฑ **Run** (ุฃู ุงุถุบุท Ctrl+Enter)
3. ุงูุชุธุฑ ุญุชู ุชูุชูู ุงูุนูููุฉ

### ุงููุชูุฌุฉ ุงููุชููุนุฉ:

```
Success. No rows returned
```

---

## โ ุงูุฎุทูุฉ 4: ุงูุชุญูู ูู ุงูุชุญุฏูุซุงุช

### ุชุญูู ูู ุงูุฃุนูุฏุฉ ุงูุฌุฏูุฏุฉ:

```sql
-- ููุฐ ูุฐุง ุงูุงุณุชุนูุงู ููุชุญูู:
SELECT column_name, data_type
FROM information_schema.columns
WHERE table_name = 'products'
AND column_name IN ('previous_purchase_price', 'last_purchase_price_update');
```

### ุงููุชูุฌุฉ ุงููุชููุนุฉ:

```
column_name                  | data_type
----------------------------+----------
previous_purchase_price     | numeric
last_purchase_price_update  | timestamp with time zone
```

---

## ๐ ุงูุฎุทูุฉ 5: ุงุฎุชุจุงุฑ ุงูุชุญุฏูุซุงุช

### ุงุฎุชุจุงุฑ 1: ุชุญุฏูุซ ุณุนุฑ ููุชุฌ

```sql
-- ุงุฎุชุฑ ููุชุฌ ููุฌูุฏ
UPDATE products
SET purchase_price = 20000
WHERE id = 'YOUR_PRODUCT_ID';

-- ุชุญูู ูู ุญูุธ ุงูุณุนุฑ ุงูุณุงุจู
SELECT name, previous_purchase_price, purchase_price, last_purchase_price_update
FROM products
WHERE id = 'YOUR_PRODUCT_ID';
```

### ุงุฎุชุจุงุฑ 2: ุชุญุฏูุซ ุงุณู ููุชุฌ

```sql
-- ุบููุฑ ุงุณู ููุชุฌ
UPDATE products
SET name = 'ุงุณู ุฌุฏูุฏ ููููุชุฌ'
WHERE id = 'YOUR_PRODUCT_ID';

-- ุชุญูู ูู ุงูุชุญุฏูุซ ูู ุงูููุงุชูุฑ
SELECT product_name
FROM invoice_items
WHERE product_id = 'YOUR_PRODUCT_ID';
```

---

## ๐ฏ ูุง ุชู ุฅุถุงูุชู ุจุงูุถุจุทุ

### 1. ุฃุนูุฏุฉ ุฌุฏูุฏุฉ ูู ุฌุฏูู products:

- `previous_purchase_price` - ุณุนุฑ ุงูุดุฑุงุก ุงูุณุงุจู
- `last_purchase_price_update` - ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ

### 2. Triggers ุฌุฏูุฏุฉ:

- `track_purchase_price_changes` - ูุญูุธ ุงูุณุนุฑ ุงูุณุงุจู ุชููุงุฆูุงู
- `sync_product_name_to_invoices` - ูุชุญุฏูุซ ุงูุฃุณูุงุก ูู ุงูููุงุชูุฑ

### 3. Indexes ุฌุฏูุฏุฉ ููุฃุฏุงุก:

- `idx_products_name` - ููุฑุณ ุนูู ุงุณู ุงูููุชุฌ
- `idx_products_updated_at` - ููุฑุณ ุนูู ุชุงุฑูุฎ ุงูุชุญุฏูุซ
- `idx_invoice_items_product_id` - ููุฑุณ ุนูู ูุนุฑู ุงูููุชุฌ

---

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฎุทุฃ: "column already exists"

**ุงูุณุจุจ**: ุงูุณูุฑูุจุช ูููุฐ ูุณุจูุงู  
**ุงูุญู**: ูุง ุฏุงุนู ูููููุ ุงูุชุญุฏูุซุงุช ููุฌูุฏุฉ ุจุงููุนู

### ุฎุทุฃ: "permission denied"

**ุงูุณุจุจ**: ุตูุงุญูุงุช ุบูุฑ ูุงููุฉ  
**ุงูุญู**:

1. ุชุฃูุฏ ูู ุฃูู ูุณุฌู ุฏุฎูู ูู Owner
2. ุฃู ุงุณุชุฎุฏู Service Role Key

### ุฎุทุฃ: "syntax error"

**ุงูุณุจุจ**: ุฎุทุฃ ูู ูุณุฎ ุงูุณูุฑูุจุช  
**ุงูุญู**:

1. ุงุญุฐู ุงููุญุชูู
2. ุงูุณุฎ ุงูุณูุฑูุจุช ูุฑุฉ ุฃุฎุฑู ุจุงููุงูู
3. ุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ุฃุญุฑู ุบุฑูุจุฉ

---

## ๐ ุงูุชุญูู ุงูููุงุฆู

### ููุฐ ูุฐุง ุงูุงุณุชุนูุงู ููุชุญูู ูู ูู ุดูุก:

```sql
-- 1. ุงูุชุญูู ูู ุงูุฃุนูุฏุฉ
SELECT column_name
FROM information_schema.columns
WHERE table_name = 'products'
AND column_name LIKE '%purchase%';

-- 2. ุงูุชุญูู ูู ุงูู Triggers
SELECT trigger_name
FROM information_schema.triggers
WHERE event_object_table = 'products';

-- 3. ุงูุชุญูู ูู ุงูู Indexes
SELECT indexname
FROM pg_indexes
WHERE tablename = 'products';
```

### ุงููุชูุฌุฉ ุงููุชููุนุฉ:

**ุงูุฃุนูุฏุฉ**:

- purchase_price
- previous_purchase_price
- last_purchase_price_update

**ุงูู Triggers**:

- track_purchase_price_changes
- sync_product_name_to_invoices
- update_products_updated_at

**ุงูู Indexes**:

- idx_products_name
- idx_products_updated_at
- idx_products_user_id
- idx_products_barcode

---

## ๐ ุชู ุจูุฌุงุญ!

ุฅุฐุง ุฑุฃูุช ุฌููุน ุงูุนูุงุตุฑ ุฃุนูุงูุ ููุฏ ุชู ุงูุชุญุฏูุซ ุจูุฌุงุญ! ๐

### ุงูุฎุทูุงุช ุงูุชุงููุฉ:

1. โ ุงุฑุฌุน ููุชุทุจูู
2. โ ุงูุชุญ ุตูุญุฉ ุงูููุชุฌุงุช
3. โ ุดุงูุฏ ุงูุฃุนูุฏุฉ ุงูุฌุฏูุฏุฉ
4. โ ุฌุฑุจ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

---

## ๐ ููุงุญุธุงุช ุฅุถุงููุฉ

### ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ:

- โ ูู ุชุชุฃุซุฑ ุงูุจูุงูุงุช ุงูุญุงููุฉ
- โ ุณูุชู ุชุนููู `previous_purchase_price` = `purchase_price` ููููุชุฌุงุช ุงูููุฌูุฏุฉ
- โ `last_purchase_price_update` ุณูููู = `updated_at`

### ุงูุฃุฏุงุก:

- โ ุงูู Indexes ุงูุฌุฏูุฏุฉ ุชุญุณู ุงูุฃุฏุงุก
- โ ูู ุชูุงุญุธ ุฃู ุจุทุก
- โ ุงูุงุณุชุนูุงูุงุช ุฃุณุฑุน

### ุงูุชูุงูู:

- โ ูุชูุงูู ูุน ุฌููุน ุงูููุฒุงุช ุงูููุฌูุฏุฉ
- โ ูุง ูุคุซุฑ ุนูู ุงูููุงุชูุฑ ุงูุญุงููุฉ
- โ ุขูู 100%

---

## ๐ ุงูุฏุนู

### ุฅุฐุง ูุงุฌูุช ูุดุงูู:

1. ุฑุงุฌุน ูุณู "ุงุณุชูุดุงู ุงูุฃุฎุทุงุก" ุฃุนูุงู
2. ุชุญูู ูู Supabase Logs
3. ุชุฃูุฏ ูู ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ

### ูุนูููุงุช ูููุฏุฉ:

- ๐ Supabase Docs: https://supabase.com/docs
- ๐ฌ Supabase Discord: https://discord.supabase.com

---

## โ ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ

- [ ] ุชู ุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ
- [ ] ุชู ูุชุญ SQL Editor
- [ ] ุชู ูุณุฎ ุงูุณูุฑูุจุช ูุงููุงู
- [ ] ุชู ุชูููุฐ ุงูุณูุฑูุจุช ุจูุฌุงุญ
- [ ] ุชู ุงูุชุญูู ูู ุงูุฃุนูุฏุฉ ุงูุฌุฏูุฏุฉ
- [ ] ุชู ุงูุชุญูู ูู ุงูู Triggers
- [ ] ุชู ุงุฎุชุจุงุฑ ุงูุชุญุฏูุซุงุช
- [ ] ูู ุดูุก ูุนูู ุจุดูู ุตุญูุญ โจ

---

**ุชู ุงูุฅุนุฏุงุฏ ุจูุงุณุทุฉ**: Antigravity AI  
**ุงูุชุงุฑูุฎ**: 2026-01-29  
**ุงูุฅุตุฏุงุฑ**: 2.0
