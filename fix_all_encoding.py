# -*- coding: utf-8 -*-
import os
import glob

# All Arabic text mappings
replacements = {
    # Titles and Headers
    "???? ?????? - ???? ????? ?????": "ููุญุฉ ุงูุชุญูู - ูุธุงู ุงูุฅุฏุงุฑุฉ ุงููุชูุงูู",
    "????????? - ???? ????? ?????": "ุงูุฅุนุฏุงุฏุงุช - ูุธุงู ุงูุฅุฏุงุฑุฉ ุงููุชูุงูู",
    "?????? ??????? - ???? ????? ?????": "ุญุณุงุจุงุช ุงูุฒุจุงุฆู - ูุธุงู ุงูุฅุฏุงุฑุฉ ุงููุชูุงูู",
    "???????? - ???? ????? ?????": "ุงูููุงุชูุฑ - ูุธุงู ุงูุฅุฏุงุฑุฉ ุงููุชูุงูู",
    "???????? - ???? ????? ?????": "ุงูููุชุฌุงุช - ูุธุงู ุงูุฅุฏุงุฑุฉ ุงููุชูุงูู",
    "??????? - ???? ????? ?????": "ุงูุฒุจุงุฆู - ูุธุงู ุงูุฅุฏุงุฑุฉ ุงููุชูุงูู",
    "????? ?????? - ???? ????? ?????": "ุฅุฏุงุฑุฉ ุงูุชูุฑูุฏ - ูุธุงู ุงูุฅุฏุงุฑุฉ ุงููุชูุงูู",
    "???? ????? ????": "ูุธุงู ุงูุฅุฏุงุฑุฉ ุงููุชูุงูู",
    
    # Loading
    "???? ???????...": "ุฌุงุฑู ุงูุชุญููู...",
    
    # Header
    "?? ": "ุฃููุงู ",
    "?? ????? ??????": "ุชุณุฌูู ุงูุฎุฑูุฌ",
    
    # Navigation Menu
    "???? ??????": "ููุญุฉ ุงูุชุญูู",
    "?????? ?????": "ูุงุชูุฑุฉ ุฌุฏูุฏุฉ",
    "????????": "ุงูููุงุชูุฑ",
    "????????": "ุงูููุชุฌุงุช",
    "???????": "ุงูุฒุจุงุฆู",
    "?????????": "ุงูุชูุฑูุฏุงุช",
    "??????????": "ุงูุฅุญุตุงุฆูุงุช",
    "?????????": "ุงูุฅุนุฏุงุฏุงุช",
    "??????????": "ุงููุณุชุฎุฏููู",
    "?????? ???????": "ุญุณุงุจุงุช ุงูุฒุจุงุฆู",
    "?????? ??????": "ุฅุฏุงุฑุฉ ุงูุชูุฑูุฏ",
    "?????????": "ุงูุณูุฏุงุช",
    
    # Stats
    "?????? ?????": "ููุงุชูุฑ ุงูููู",
    "?????? ?????": "ูุจูุนุงุช ุงูููู",
    "????? ?????": "ุงูุฃุฑุจุงุญ ุงูููู",
    "?????? ?????? ???????": "ููุชุฌุงุช ููุฎูุถ ุงููุฎุฒูู",
    
    # Quick Actions
    "? ??????? ?????": "โก ุงูุฅุฌุฑุงุกุงุช ุงูุณุฑูุนุฉ",
    "? ?????? ?????": "+ ูุงุชูุฑุฉ ุฌุฏูุฏุฉ",
    "?? ????? ????": "๐ฆ ุฅุถุงูุฉ ููุชุฌ",
    "?? ????? ?????": "๐ ุฅุถุงูุฉ ุชูุฑูุฏ",
    "?? ??? ??????????": "๐ ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช",
    
    # Recent Invoices
    "?? ??? ????????": "ุขุฎุฑ ุนุดุฑ ุงูููุงุชูุฑ",
    "??? ????": "ุนุฑุถ ุงููู",
    "??? ????????": "ุฑูู ุงููุงุชูุฑุฉ",
    "???????": "ุงูุชุงุฑูุฎ",
    "???????": "ุงูุฒุจูู",
    "??????": "ุงููุจูุบ",
    "??????": "ุงูุญุงูุฉ",
    "????": "ูุดุทุฉ",
    "?????": "ููุบุงุฉ",
    "?? ???? ?????? ???": "ูุง ุชูุฌุฏ ููุงุชูุฑ ุจุนุฏ",
    
    # Low Stock Products
    "?? ?????? ?????? ???????": "ุฃูู ุงูููุชุฌุงุช ููุฎูุถ ุงููุฎุฒูู",
    "????? ????????": "ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช",
    "??????": "ุงูููุชุฌ",
    "?????? ????????": "ุงููุฎุฒูู ุงููุชููุฑ",
    "?????": "ุงูุฅุฌุฑุงุก",
    "?? ???? ?????? ?????? ???????": "ูุง ุชูุฌุฏ ููุชุฌุงุช ููุฎูุถุฉ ุงููุฎุฒูู",
    "?? ?????": "ุทูุจ ุงูุชูุฑูุฏ",
    
    # Settings
    "?? ??????? ?????": "ูุนูููุงุช ุงููุชุฌุฑ",
    "??? ?????": "ุงุณู ุงููุชุฌุฑ",
    "???? ??? ?????": "ุฃุฏุฎู ุงุณู ุงููุชุฌุฑ",
    "??? ??????": "ุฑูู ุงููุงุชู",
    "???????": "ุงูุนููุงู",
    "????? ?????": "ุนููุงู ุงููุชุฌุฑ",
    "??? ??????": "ุงุณู ุงููููู",
    "??? ??????? ?? ??????": "ุงุณู ุงูููุธู ุฃู ุงููููู",
    "????? ??? ????????": "ุจุงุฏุฆุฉ ุฑูู ุงููุงุชูุฑุฉ",
    "????": "ูุซุงู",
    "????? ??? ???????? ???? ?????": "ููุงุชูุฑ ุฑูู ุงููุงุชูุฑุฉ ูุซู ูุซุงู",
    "?? ??? ?????????": "ุญูุธ ุงูุฅุนุฏุงุฏุงุช",
    "?? ??????? ??????": "ูุนูููุงุช ุงููุธุงู",
    "???????": "ุงูุฅุตุฏุงุฑ",
    "????? ????????": "ูุงุนุฏุฉ ุงูุจูุงูุงุช",
    "?????? ??????????": "ุงูุจุฑูุฏ ุงูุฅููุชุฑููู",
    "?? ??? ????????? ?????": "ุชู ุญูุธ ุงูุฅุนุฏุงุฏุงุช ุจูุฌุงุญ",
    "??? ??? ????? ?????": "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุญูุธ",
    "?????": "ูุชุฌุฑ",
    
    # Customer Accounts
    "?? ?????? ???????": "ูู ุญุณุงุจุงุช ุงูุฒุจุงุฆู",
    "? ????? ????": "+ ุฅุถุงูุฉ ุฒุจูู",
    "??? ??????": "ุงุณู ุงูุฒุจูู",
    "??? ??????": "ุฑูู ุงููุงุชู",
    "?????? ??????": "ุงูุญุณุงุจ ุงูุฅุฌูุงูู",
    "?????????": "ุงูุฅุฌุฑุงุกุงุช",
    "??? ??????": "ุนุฑุถ ุงูุชูุงุตูู",
    "?? ???? ??????": "ูุง ููุฌุฏ ุฒุจุงุฆู",
    
    # Receipts
    "?? ?????????": "ูู ุงูุณูุฏุงุช",
    "? ????? ????": "+ ุฅุถุงูุฉ ุณูุฏ",
    "?????": "ููุงุชุฑ",
    "???? ???????": "ุฌููุน ุงูุฃููุงุน",
    "??????? ????? ???": "ุงูุณูุฏุงุช ููุน ูุจุถ",
    "??????? ????? ???": "ุงูุณูุฏุงุช ููุน ุตุฑู",
    "??? ???????": "ุฑูู ุงูุณูุฏ",
    "?????": "ุงูููุน",
    "?????": "ุงูุฌูุฉ",
    "?? ???? ???????": "ูุง ุชูุฌุฏ ุณูุฏุงุช",
    "???": "ูุจุถ",
    "???": "ุตุฑู",
    "??? ?????": "ุนุฑุถ ูุทุจุงุนุฉ",
    
    # Common
    "?.?": "ุฏ.ุน",
    "?????? ????????": "ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ",
    
    # Comments
    "<!-- ????? -->": "<!-- ููุงุชุฑ -->",
    
    # JavaScript errors
    "??? ?? ????????": "ุฎุทุฃ ูู ุงููุตุงุฏูุฉ",
    "??? ?? ????? ????????": "ุฎุทุฃ ูู ุชุญููู ุงูุจูุงูุงุช",
    "??? ?? ????? ?????????": "ุฎุทุฃ ูู ุชุญููู ุงูุฅุนุฏุงุฏุงุช",
    "??? ?? ????? ?????????": "ุฎุทุฃ ูู ุชุญููู ุงูุณูุฏุงุช",
    "??? ?? ??? ?????????": "ุฎุทุฃ ูู ุญูุธ ุงูุฅุนุฏุงุฏุงุช",
    "??? ?? ????? ??????": "ุฎุทุฃ ูู ุชุณุฌูู ุงูุฎุฑูุฌ",
    "??? ??? ????? ????? ??????": "ุญุฏุซ ุฎุทุฃ ุจุชุณุฌูู ุงูุฎุฑูุฌ",
    "??? ?? ????? ????????": "ุฎุทุฃ ูู ุชุญููู ุงูุจูุงูุงุช",
    "??? ?? ????? setup": "ุงูุชูุฌู ุฅูู ุตูุญุฉ setup",
    "????? ?? ????? setup": "ุงูุชุญูู ูู ุตูุญุฉ setup",
    "????? ?????? ?? Supabase": "ุงูุชุญูู ูุงูุญุตูู ูู Supabase",
    "?? ???????? ?????? ???????": "ุงูููุชุฌุงุช ููุฎูุถุฉ ุงููุฎุฒูู",
    "??? ??? ????????": "ุนุฑุถ ุนุดุฑ ุงูููุงุชูุฑ",
    "??? ???????? ?????? ???????": "ุนุฑุถ ุงูููุชุฌุงุช ููุฎูุถ ุงููุฎุฒูู",
    "??? ????? ??? ????????": "ุนุฏู ูุฌูุฏ ุฃูุฉ ุจูุงูุงุช",
}

def fix_file(filepath):
    """Fix encoding in a single HTML file"""
    try:
        # Read file with default encoding (will read as-is with corrupted text)
        with open(filepath, 'r', encoding='utf-8', errors='ignore') as f:
            content = f.read()
        
        # Replace all corrupted text with correct Arabic
        for old, new in replacements.items():
            content = content.replace(old, new)
        
        # Write back with UTF-8 BOM
        with open(filepath, 'w', encoding='utf-8-sig') as f:
            f.write(content)
        
        return True, None
    except Exception as e:
        return False, str(e)

def main():
    # Find all HTML files
    html_files = glob.glob('*.html')
    
    print(f"Found {len(html_files)} HTML files")
    print("-" * 50)
    
    success_count = 0
    error_count = 0
    
    for html_file in html_files:
        success, error = fix_file(html_file)
        if success:
            print(f"โ Fixed: {html_file}")
            success_count += 1
        else:
            print(f"โ Error in {html_file}: {error}")
            error_count += 1
    
    print("-" * 50)
    print(f"\nComplete! {success_count} files fixed, {error_count} errors")
    print("\nPlease refresh your browser to see changes.")

if __name__ == "__main__":
    main()
