# -*- coding: utf-8 -*-
"""
Ultimate fix for Arabic encoding - Replace ALL question marks with proper Arabic text
"""
import glob
import re

# Complete mapping of ALL Arabic text in the system
ARABIC_REPLACEMENTS = [
    # Page titles
    ("???? ?????? - ???? ????? ?????", "ููุญุฉ ุงูุชุญูู - ูุธุงู ุงูุฅุฏุงุฑุฉ ุงููุชูุงูู"),
    ("????????? - ???? ????? ?????", "ุงูุฅุนุฏุงุฏุงุช - ูุธุงู ุงูุฅุฏุงุฑุฉ ุงููุชูุงูู"),
    ("?????? ??????? - ???? ????? ?????", "ุญุณุงุจุงุช ุงูุฒุจุงุฆู - ูุธุงู ุงูุฅุฏุงุฑุฉ ุงููุชูุงูู"),
    ("???????? - ???? ????? ?????", "ุงูููุงุชูุฑ - ูุธุงู ุงูุฅุฏุงุฑุฉ ุงููุชูุงูู"),
    ("???????? - ???? ????? ?????", "ุงูููุชุฌุงุช - ูุธุงู ุงูุฅุฏุงุฑุฉ ุงููุชูุงูู"),
    ("??????? - ???? ????? ?????", "ุงูุฒุจุงุฆู - ูุธุงู ุงูุฅุฏุงุฑุฉ ุงููุชูุงูู"),
    ("???? ????? ?????", "ูุธุงู ุงูุฅุฏุงุฑุฉ ุงููุชูุงูู"),
    
    # Loading & Headers
    ("???? ???????...", "ุฌุงุฑู ุงูุชุญููู..."),
    ("?? ", "ุฃููุงู "),
    ("?? ????? ??????", "ุชุณุฌูู ุงูุฎุฑูุฌ"),
    
    # Navigation - exact patterns
    ("??", "๐"),  # Dashboard icon  
    ("???? ??????", "ููุญุฉ ุงูุชุญูู"),
    ("?????? ?????", "ูุงุชูุฑุฉ ุฌุฏูุฏุฉ"),
    ("????????", "ุงูููุงุชูุฑ"),
    ("????????", "ุงูููุชุฌุงุช"),
    ("???????", "ุงูุฒุจุงุฆู"),
    ("?????????", "ุงูุชูุฑูุฏุงุช"),
    ("??????????", "ุงูุฅุญุตุงุฆูุงุช"),
    ("?????????", "ุงูุฅุนุฏุงุฏุงุช"),
    ("??????????", "ุงููุณุชุฎุฏููู"),
    ("?????? ???????", "ุญุณุงุจุงุช ุงูุฒุจุงุฆู"),
    
    # Stats
    ("?????? ?????", "ููุงุชูุฑ ุงูููู"),
    ("?????? ?????", "ูุจูุนุงุช ุงูููู"),
    ("????? ?????", "ุงูุฃุฑุจุงุญ ุงูููู"),
    ("?????? ??????", " ููุชุฌุงุช ุงููุฎุฒูู"),
    ("?????? ?????? ???????", "ููุชุฌุงุช ููุฎูุถ ุงููุฎุฒูู"),
    
    # Quick Actions
    ("? ??????? ?????", "โก ุงูุฅุฌุฑุงุกุงุช ุงูุณุฑูุนุฉ"),
    ("? ?????? ?????", "+ ูุงุชูุฑุฉ ุฌุฏูุฏุฉ"),
    ("?? ????? ????", "๐ฆ ุฅุถุงูุฉ ููุชุฌ"),
    ("?? ????? ?????", "๐ ุฅุถุงูุฉ ุชูุฑูุฏ"),
    ("?? ??? ??????????", "๐ ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช"),
    
    # Tables
    ("??? ????", "ุนุฑุถ ุงููู"),
    ("?? ??? ????????", "ุขุฎุฑ ุนุดุฑ ุงูููุงุชูุฑ"),
    ("??? ????????", "ุฑูู ุงููุงุชูุฑุฉ"),
    ("???????", "ุงูุชุงุฑูุฎ"),
    ("???????", "ุงูุฒุจูู"),
    ("??????",  "ุงููุจูุบ"),
    ("??????", "ุงูุญุงูุฉ"),
    ("????", "ูุดุทุฉ"),
    ("?????", "ููุบุงุฉ"),
    ("?? ???? ?????? ???", "ูุง ุชูุฌุฏ ููุงุชูุฑ ุจุนุฏ"),
    
    # Low Stock
    ("?? ?????? ?????? ???????", "ุฃูู ุงูููุชุฌุงุช ููุฎูุถ ุงููุฎุฒูู"),
    ("????? ????????", "ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช"),
    ("??????", "ุงูููุชุฌ"),
    ("?????? ????????", "ุงููุฎุฒูู ุงููุชููุฑ"),
    ("?????", "ุงูุฅุฌุฑุงุก"),
    ("?? ???? ?????? ?????? ???????", "ูุง ุชูุฌุฏ ููุชุฌุงุช ููุฎูุถุฉ ุงููุฎุฒูู"),
    ("?? ?????", "ุทูุจ ุงูุชูุฑูุฏ"),
    
    # Common
    ("?.?", "ุฏ.ุน"),
    
    # Comments
    ("????? ??", "ุงูุฅุญุตุงุก ุนูู"),
    ("??????? ??", "ุงูุจุฏุงูุฉ ูู"),
]

def fix_file(filepath):
    """Fix a single HTML file"""
    try:
        with open(filepath, 'r', encoding='utf-8', errors='ignore') as f:
            content = f.read()
        
        # Apply all replacements
        for old, new in ARABIC_REPLACEMENTS:
            content = content.replace(old, new)
        
        # Write back
        with open(filepath, 'w', encoding='utf-8') as f:
            f.write(content)
        
        return True
    except Exception as e:
        print(f"Error in {filepath}: {e}")
        return False

def main():
    files = glob.glob('*.html')
    print(f"Fixing {len(files)} HTML files...")
    print("=" * 50)
    
    success = 0
    for filepath in sorted(files):
        if fix_file(filepath):
            print(f"โ {filepath}")
            success += 1
    
    print("=" * 50)
    print(f"Done! Fixed {success}/{len(files)} files")
    print("\nRefresh your browser with Ctrl+F5 to see changes!")

if __name__ == "__main__":
    main()
